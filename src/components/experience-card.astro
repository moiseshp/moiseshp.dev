---
import type { IExperience } from '@/types/experience';
import Chip from '@/components/chip.astro';

const { duration, position, location, company, employmentType, projects } =
  Astro.props as IExperience;
---

<article class="mb-4 ml-6 rounded-lg border p-5 md:ml-8">
  <div class="absolute -left-[0.4rem] h-3 w-6 md:w-8">
    <span
      class="absolute left-[0.4rem] top-1/2 -z-10 block h-px w-full bg-border"
    ></span>
    <span class="block h-3 w-3 rounded-full border bg-background"></span>
  </div>
  <time class="mb-6 block text-sm leading-none text-muted-foreground">
    {duration.startDate} – {duration.endDate}
  </time>
  <div class="flex flex-col gap-4 md:flex-row">
    <img src={company.logo} alt={company.name} class="h-10 w-10 object-cover" />
    <div class="flex-1 space-y-3">
      <div>
        <h3 class="text-lg font-semibold">{position}</h3>
        <a target="_blank" rel="noopener noreferrer" href={company.url}>
          <strong class="font-semibold">{company.name}</strong>
          <span class="px-1">·</span>
          <span>{employmentType}</span>
        </a>
        <p class="text-muted-foreground">{location}</p>
      </div>

      <h4 class="mb-3 font-semibold">Featured Projects</h4>
      <ol class="list-decimal space-y-6 pl-4 md:pl-5">
        {
          projects.map(({ name, topics, descriptionList }) => (
            <li>
              <h4 class="mb-2 font-semibold">{name}</h4>
              <ol class="mb-4 list-disc space-y-1 pl-3.5 md:pl-5">
                {descriptionList?.map((item: string) => (
                  <li>{item}</li>
                ))}
              </ol>
              <div class="flex flex-wrap gap-2">
                {topics.map((item) => (
                  <Chip>{item}</Chip>
                ))}
              </div>
            </li>
          ))
        }
      </ol>
    </div>
  </div>
</article>
